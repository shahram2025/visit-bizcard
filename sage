[1mdiff --git a/src/App.js b/src/App.js[m
[1mindex c8d0ffe..8a41c8e 100644[m
[1m--- a/src/App.js[m
[1m+++ b/src/App.js[m
[36m@@ -1,5 +1,6 @@[m
 import React, { useState, useEffect } from "react";[m
[31m-import { BrowserRouter as Router, Routes, Route } from "react-router-dom";[m
[32m+[m[32mimport { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from "react-router-dom";[m
[32m+[m[32mimport { supabase } from "./lib/supabaseClient";[m
 import Layout from "./components/Layout/Layout";[m
 import HomePage from "./pages/HomePage/HomePage";[m
 import CommunityPage from "./pages/CommunityPage/CommunityPage";[m
[36m@@ -7,8 +8,9 @@[m [mimport BlankPage from "./pages/BlankPage/BlankPage";[m
 import SitPage from "./pages/SitPage/SitPage";[m
 import ThirdeyePage from "./pages/ThirdeyePage/ThirdeyePage";[m
 import ErrorBoundary from "./components/ErrorBoundary/ErrorBoundary";[m
[31m-import { supabase } from "./lib/supabaseClient"; // âœ… new[m
[31m-import AuthForm from "./components/AuthForm";     // âœ… new[m
[32m+[m[32mimport AuthForm from "./components/AuthForm";[m
[32m+[m[32mimport LoadingScreen from "./components/LoadingScreen";[m
[32m+[m[32mimport AuthLayout from "./components/AuthLayout";[m
 [m
 const defaultProfileImage =[m
   "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%2394a3b8' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3a3 3 0 110 6 3 3 0 010-6zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3C/svg%3E";[m
[36m@@ -16,83 +18,113 @@[m [mconst defaultProfileImage =[m
 function App() {[m
   const [showUserProfile, setShowUserProfile] = useState(false);[m
   const [profileImage, setProfileImage] = useState(defaultProfileImage);[m
[31m-[m
[31m-  // âœ… Supabase Auth State[m
   const [user, setUser] = useState(null);[m
[32m+[m[32m  const [loading, setLoading] = useState(true);[m
[32m+[m[32m  const [authError, setAuthError] = useState(null);[m
 [m
[32m+[m[32m  // Handle auth state changes[m
   useEffect(() => {[m
[31m-    supabase.auth.getUser().then(({ data: { user } }) => {[m
[31m-      setUser(user);[m
[31m-    });[m
[32m+[m[32m    setLoading(true);[m
[32m+[m[41m    [m
[32m+[m[32m    // Check initial session[m
[32m+[m[32m    const checkSession = async () => {[m
[32m+[m[32m      try {[m
[32m+[m[32m        const { data: { session }, error } = await supabase.auth.getSession();[m
[32m+[m[41m        [m
[32m+[m[32m        if (error) throw error;[m
[32m+[m[32m        setUser(session?.user ?? null);[m
[32m+[m[32m      } catch (error) {[m
[32m+[m[32m        console.error("Session check error:", error);[m
[32m+[m[32m        setAuthError(error.message);[m
[32m+[m[32m      } finally {[m
[32m+[m[32m        setLoading(false);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
 [m
[31m-    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {[m
[31m-      setUser(session?.user || null);[m
[32m+[m[32m    checkSession();[m
[32m+[m
[32m+[m[32m    // Subscribe to auth changes[m
[32m+[m[32m    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {[m
[32m+[m[32m      console.log("Auth state changed:", event);[m
[32m+[m[32m      setUser(session?.user ?? null);[m
[32m+[m[32m      setLoading(false);[m
[32m+[m[41m      [m
[32m+[m[32m      // Clear error on successful auth[m
[32m+[m[32m      if (event === "SIGNED_IN") {[m
[32m+[m[32m        setAuthError(null);[m
[32m+[m[32m      }[m
     });[m
 [m
[31m-    return () => listener.subscription.unsubscribe();[m
[32m+[m[32m    return () => subscription.unsubscribe();[m
   }, []);[m
 [m
[31m-  // âœ… If not logged in, show login/signup form[m
[31m-  if (!user) return <AuthForm />;[m
[32m+[m[32m  // Handle logout[m
[32m+[m[32m  const handleLogout = async () => {[m
[32m+[m[32m    setLoading(true);[m
[32m+[m[32m    const { error } = await supabase.auth.signOut();[m
[32m+[m[32m    if (error) {[m
[32m+[m[32m      console.error("Logout error:", error);[m
[32m+[m[32m      setAuthError(error.message);[m
[32m+[m[32m    }[m
[32m+[m[32m    setLoading(false);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  if (loading) {[m
[32m+[m[32m    return <LoadingScreen />;[m
[32m+[m[32m  }[m
 [m
   return ([m
     <Router>[m
       <div className="app">[m
[31m-        <Layout[m
[31m-          profileImage={profileImage}[m
[31m-          onProfileClick={() => setShowUserProfile(true)}[m
[31m-        >[m
[31m-          <Routes>[m
[31m-            <Route[m
[31m-              path="/"[m
[31m-              element={[m
[31m-                <ErrorBoundary>[m
[31m-                  <HomePage[m
[31m-                    showUserProfile={showUserProfile}[m
[31m-                    setShowUserProfile={setShowUserProfile}[m
[31m-                    profileImage={profileImage}[m
[31m-                    setProfileImage={setProfileImage}[m
[31m-                  />[m
[31m-                </ErrorBoundary>[m
[31m-              }[m
[31m-            />[m
[31m-            <Route[m
[31m-              path="/community"[m
[31m-              element={[m
[31m-                <ErrorBoundary>[m
[31m-                  <CommunityPage />[m
[31m-                </ErrorBoundary>[m
[31m-              }[m
[31m-            />[m
[31m-            <Route[m
[31m-              path="/blank"[m
[31m-              element={[m
[31m-                <ErrorBoundary>[m
[31m-                  <BlankPage />[m
[31m-                </ErrorBoundary>[m
[31m-              }[m
[31m-            />[m
[31m-            <Route[m
[31m-              path="/sit"[m
[31m-              element={[m
[31m-                <ErrorBoundary>[m
[31m-                  <SitPage />[m
[31m-                </ErrorBoundary>[m
[31m-              }[m
[31m-            />[m
[31m-            <Route[m
[31m-              path="/thirdeye"[m
[31m-              element={[m
[31m-                <ErrorBoundary>[m
[31m-                  <ThirdeyePage />[m
[31m-                </ErrorBoundary>[m
[31m-              }[m
[31m-            />[m
[31m-          </Routes>[m
[31m-        </Layout>[m
[32m+[m[32m        {user ? ([m
[32m+[m[32m          <Layout[m
[32m+[m[32m            profileImage={profileImage}[m
[32m+[m[32m            onProfileClick={() => setShowUserProfile(true)}[m
[32m+[m[32m            onLogout={handleLogout}[m
[32m+[m[32m          >[m
[32m+[m[32m            <Routes>[m
[32m+[m[32m              <Route[m
[32m+[m[32m                path="/"[m
[32m+[m[32m                element={[m
[32m+[m[32m                  <ErrorBoundary>[m
[32m+[m[32m                    <HomePage[m
[32m+[m[32m                      showUserProfile={showUserProfile}[m
[32m+[m[32m                      setShowUserProfile={setShowUserProfile}[m
[32m+[m[32m                      profileImage={profileImage}[m
[32m+[m[32m                      setProfileImage={setProfileImage}[m
[32m+[m[32m                      user={user}[m
[32m+[m[32m                    />[m
[32m+[m[32m                  </ErrorBoundary>[m
[32m+[m[32m                }[m
[32m+[m[32m              />[m
[32m+[m[32m              <Route[m[41m [m
[32m+[m[32m                path="/community"[m[41m [m
[32m+[m[32m                element={[m
[32m+[m[32m                  <ErrorBoundary>[m
[32m+[m[32m                    <CommunityPage user={user} />[m
[32m+[m[32m                  </ErrorBoundary>[m
[32m+[m[32m                }[m[41m [m
[32m+[m[32m              />[m
[32m+[m[32m              <Route path="/blank" element={<ErrorBoundary><BlankPage /></ErrorBoundary>} />[m
[32m+[m[32m              <Route path="/sit" element={<ErrorBoundary><SitPage /></ErrorBoundary>} />[m
[32m+[m[32m              <Route path="/thirdeye" element={<ErrorBoundary><ThirdeyePage /></ErrorBoundary>} />[m
[32m+[m[32m              <Route path="*" element={<Navigate to="/" />} />[m
[32m+[m[32m            </Routes>[m
[32m+[m[32m          </Layout>[m
[32m+[m[32m        ) : ([m
[32m+[m[32m          <AuthLayout>[m
[32m+[m[32m            <Routes>[m
[32m+[m[32m              <Route[m[41m [m
[32m+[m[32m                path="/login"[m[41m [m
[32m+[m[32m                element={<AuthForm authError={authError} setAuthError={setAuthError} />}[m[41m [m
[32m+[m[32m              />[m
[32m+[m[32m              <Route path="*" element={<Navigate to="/login" />} />[m
[32m+[m[32m            </Routes>[m
[32m+[m[32m          </AuthLayout>[m
[32m+[m[32m        )}[m
       </div>[m
     </Router>[m
   );[m
 }[m
 [m
[31m-export default App;[m
[32m+[m[32mexport default App;[m
\ No newline at end of file[m
[1mdiff --git a/src/lib/supabaseClient.js b/src/lib/supabaseClient.js[m
[1mindex bdbdc5e..fda82fa 100644[m
[1m--- a/src/lib/supabaseClient.js[m
[1m+++ b/src/lib/supabaseClient.js[m
[36m@@ -1,15 +1,86 @@[m
[32m+[m[32m// src/lib/supabaseClient.js[m
 import { createClient } from '@supabase/supabase-js';[m
 [m
[31m-// Load environment variables[m
[31m-const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;[m
[31m-const supabaseAnonKey = import.meta.env.VITE_SUPABASE_KEY;[m
[32m+[m[32m// Configuration validation[m
[32m+[m[32mconst validateConfig = () => {[m
[32m+[m[32m  const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;[m
[32m+[m[32m  const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;[m
 [m
[31m-// Warn if variables are missing[m
[31m-if (!supabaseUrl || !supabaseAnonKey) {[m
[31m-  console.warn([m
[31m-    'âš ï¸ Supabase environment variables are missing. Check your .env file (VITE_SUPABASE_URL and VITE_SUPABASE_KEY).'[m
[31m-  );[m
[31m-}[m
[32m+[m[32m  if (!supabaseUrl || !supabaseKey) {[m
[32m+[m[32m    const errorMessage = `[m
[32m+[m[32m      Missing Supabase configuration![m
[32m+[m[32m      Please ensure you have the following in your .env file:[m
[32m+[m[32m      VITE_SUPABASE_URL=your-project-url[m
[32m+[m[32m      VITE_SUPABASE_ANON_KEY=your-anon-key[m
[32m+[m[41m      [m
[32m+[m[32m      Current values:[m
[32m+[m[32m      VITE_SUPABASE_URL: ${supabaseUrl ? 'âœ…' : 'âŒ'}[m
[32m+[m[32m      VITE_SUPABASE_ANON_KEY: ${supabaseKey ? 'âœ…' : 'âŒ'}[m
[32m+[m[32m    `;[m
[32m+[m[32m    console.error(errorMessage);[m
[32m+[m[32m    throw new Error('Supabase configuration is missing');[m
[32m+[m[32m  }[m
 [m
[31m-// Create and export the Supabase client[m
[31m-export const supabase = createClient(supabaseUrl, supabaseAnonKey);[m
[32m+[m[32m  return { supabaseUrl, supabaseKey };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// Initialize Supabase client[m
[32m+[m[32mconst initSupabase = () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const { supabaseUrl, supabaseKey } = validateConfig();[m
[32m+[m[41m    [m
[32m+[m[32m    const options = {[m
[32m+[m[32m      auth: {[m
[32m+[m[32m        autoRefreshToken: true,[m
[32m+[m[32m        persistSession: true,[m
[32m+[m[32m        detectSessionInUrl: true,[m
[32m+[m[32m        storage: typeof window !== 'undefined' ? localStorage : undefined,[m
[32m+[m[32m      },[m
[32m+[m[32m      global: {[m
[32m+[m[32m        headers: { 'x-application-name': 'visit-app' }[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    const supabase = createClient(supabaseUrl, supabaseKey, options);[m
[32m+[m
[32m+[m[32m    // Test connection[m
[32m+[m[32m    if (typeof window !== 'undefined') {[m
[32m+[m[32m      supabase.auth.getSession()[m
[32m+[m[32m        .then(({ data: { session } }) => {[m
[32m+[m[32m          console.debug('Supabase initialized:', session ? 'âœ… User logged in' : 'âœ… No active session');[m
[32m+[m[32m        })[m
[32m+[m[32m        .catch((error) => {[m
[32m+[m[32m          console.error('Supabase connection test failed:', error.message);[m
[32m+[m[32m        });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return supabase;[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('Failed to initialize Supabase:', error.message);[m
[32m+[m[32m    // Return a mock client in development to prevent crashes[m
[32m+[m[32m    if (import.meta.env.DEV) {[m
[32m+[m[32m      console.warn('Returning mock Supabase client for development');[m
[32m+[m[32m      return {[m
[32m+[m[32m        auth: {[m
[32m+[m[32m          signInWithPassword: () => Promise.resolve({ error: { message: 'Supabase not configured' } }),[m
[32m+[m[32m          signUp: () => Promise.resolve({ error: { message: 'Supabase not configured' } }),[m
[32m+[m[32m          signOut: () => Promise.resolve({ error: { message: 'Supabase not configured' } }),[m
[32m+[m[32m          getSession: () => Promise.resolve({ data: { session: null }, error: null }),[m
[32m+[m[32m          onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => {} } } })[m
[32m+[m[32m        }[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
[32m+[m[32m    throw error;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport const supabase = initSupabase();[m
[32m+[m
[32m+[m[32m// Helper types for TypeScript (optional)[m
[32m+[m[32m/**[m
[32m+[m[32m * @typedef {import('@supabase/supabase-js').SupabaseClient} SupabaseClient[m
[32m+[m[32m * @typedef {import('@supabase/supabase-js').Session} Session[m
[32m+[m[32m * @typedef {import('@supabase/supabase-js').User} User[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexport default supabase;[m
\ No newline at end of file[m
